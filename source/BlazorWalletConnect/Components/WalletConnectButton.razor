@using BlazorWalletConnect.Services
@using Microsoft.AspNetCore.Components.Web
@inject IWalletConnectInterop _walletConnectInterop

<w3m-button loadingLabel="loading..." />
@* @if (isConnected)
{
    <w3m-button />
}
else
{
    <p>Loading...</p>
}
 *@
@code {
    private bool isConnected;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        if (firstRender)
        {
            await _walletConnectInterop.ConfigureAsync(CancellationToken.None);
            isConnected = true;
            StateHasChanged();
        }
    }
}
